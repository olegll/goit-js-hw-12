{"version":3,"file":"index.js","sources":["../src/js/render-function.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCard = imgInfo => {\n    return `\n      <li class=\"gallery-card\">\n          <a class=\"img-link\" href=\"${imgInfo.largeImageURL}\">\n          <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\"/>\n          </a>\n          <ul class=\"gallery-data-img\">\n          <li class=\"img-data\">Likes: <span class=\"api-data\">${imgInfo.likes}</span></li>\n          <li class=\"img-data\">Views: <span class=\"api-data\">${imgInfo.views}</span></li>\n          <li class=\"img-data\">Comments: <span class=\"api-data\">${imgInfo.comments}</span></li>\n          <li class=\"img-data\">Downloads: <span class=\"api-data\">${imgInfo.downloads}</span></li>\n          </ul>\n      </li>`;\n  };","import axios from 'axios';\n\n\n\nexport const fetchPhotoByQuery = (searchQuery, currentPage) => {\n  \n  const axiosOptions = {\n    params: {\n    key: '48275736-0f4ea71af3074d68213ba754e',\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: currentPage,\n    },\n  };\n  return axios.get(`https://pixabay.com/api/`, axiosOptions);\n  \n};\n","// fetch('https://pixabay.com/api/?key=48275736-0f4ea71af3074d68213ba754e&q=yellow+flowers&image_type=photo')\n\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport { createGalleryCard } from './js/render-function';\nimport { fetchPhotoByQuery } from './js/pixabay-api';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.js-load-btn');\n\nconst showLoader = () => {\n  loaderEl.classList.remove('is-hidden');\n};\n\nconst hideLoader = () => {\n  loaderEl.classList.add('is-hidden');\n};\n\nlet page = 1;\nlet searchQuery = '';\nlet lightBox;\n\nconst onSearchFormSubmit = async event => {\n  showLoader();\n\n  try {\n    event.preventDefault();\n\n    searchQuery = event.currentTarget.elements.query.value.trim();\n\n    if (searchQuery === '') {\n      iziToast.warning({\n        message: 'The search query cannot be empty. Please enter a keyword!',\n        position: 'topRight',\n      });\n      hideLoader();\n      galleryEl.innerHTML = '';\n\n      return;\n    }\n\n    page = 1;\n\n    loadMoreBtn.classList.add('is-hidden');\n\n    const { data } = await fetchPhotoByQuery(searchQuery, page);\n\n    if (data.total === 0) {\n      iziToast.warning({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n\n      galleryEl.innerHTML = '';\n      hideLoader();\n      searchFormEl.reset();\n\n      return;\n    }\n\n    if (data.totalHits > data.hits.length) {\n      loadMoreBtn.classList.remove('is-hidden');\n\n      loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n    }\n\n    const galleryTemplate = data.hits.map(el => createGalleryCard(el)).join('');\n\n    galleryEl.innerHTML = galleryTemplate;\n\n    smoothScrollToNewItems();\n\n    searchFormEl.reset();\n   \n    if (lightBox) {\n      lightBox.refresh();\n    } else {\n      lightBox = new SimpleLightbox('.js-gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      message:\n        'An error occurred while fetching images. Please try again later.',\n      position: 'topRight',\n    });\n  }\n  hideLoader();\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n\nconst onLoadMoreBtnClick = async event => {\n  try {\n    page++;\n\n    const { data } = await fetchPhotoByQuery(searchQuery, page);\n\n    const galleryTemplate = data.hits.map(el => createGalleryCard(el)).join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n\n    smoothScrollToNewItems();\n\n    \n    lightBox.refresh();\n\n    if (page * 15 >= data.totalHits) {\n      loadMoreBtn.classList.add('is-hidden');\n\n      loadMoreBtn.removeEventListener('click', onLoadMoreBtnClick);\n\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (err) {\n    console.log(err);\n  }\n};\nconst smoothScrollToNewItems = () => {\n  const cardHeight = document\n    .querySelector('.gallery-card')\n    .getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n};\n"],"names":["createGalleryCard","imgInfo","fetchPhotoByQuery","searchQuery","currentPage","axiosOptions","axios","searchFormEl","galleryEl","loaderEl","loadMoreBtn","showLoader","hideLoader","page","lightBox","onSearchFormSubmit","event","iziToast","data","onLoadMoreBtnClick","galleryTemplate","el","smoothScrollToNewItems","SimpleLightbox","err","cardHeight"],"mappings":"wyBAAO,MAAMA,EAAoBC,GACtB;AAAA;AAAA,sCAE2BA,EAAQ,aAAa;AAAA,0CACjBA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA,+DAGrBA,EAAQ,KAAK;AAAA,+DACbA,EAAQ,KAAK;AAAA,kEACVA,EAAQ,QAAQ;AAAA,mEACfA,EAAQ,SAAS;AAAA;AAAA,aCNvEC,EAAoB,CAACC,EAAaC,IAAgB,CAE7D,MAAMC,EAAe,CACnB,OAAQ,CACR,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACL,CACL,EACE,OAAOE,EAAM,IAAI,2BAA4BD,CAAY,CAE3D,ECZME,EAAe,SAAS,cAAc,iBAAiB,EACvDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAc,SAAS,cAAc,cAAc,EAEnDC,EAAa,IAAM,CACvBF,EAAS,UAAU,OAAO,WAAW,CACvC,EAEMG,EAAa,IAAM,CACvBH,EAAS,UAAU,IAAI,WAAW,CACpC,EAEA,IAAII,EAAO,EACPV,EAAc,GACdW,EAEJ,MAAMC,EAAqB,MAAMC,GAAS,CACxCL,IAEA,GAAI,CAKF,GAJAK,EAAM,eAAc,EAEpBb,EAAca,EAAM,cAAc,SAAS,MAAM,MAAM,OAEnDb,IAAgB,GAAI,CACtBc,EAAS,QAAQ,CACf,QAAS,4DACT,SAAU,UAClB,CAAO,EACDL,IACAJ,EAAU,UAAY,GAEtB,MACD,CAEDK,EAAO,EAEPH,EAAY,UAAU,IAAI,WAAW,EAErC,KAAM,CAAE,KAAAQ,CAAI,EAAK,MAAMhB,EAAkBC,EAAaU,CAAI,EAE1D,GAAIK,EAAK,QAAU,EAAG,CACpBD,EAAS,QAAQ,CACf,QACE,2EACF,SAAU,UAClB,CAAO,EAEDT,EAAU,UAAY,GACtBI,IACAL,EAAa,MAAK,EAElB,MACD,CAEGW,EAAK,UAAYA,EAAK,KAAK,SAC7BR,EAAY,UAAU,OAAO,WAAW,EAExCA,EAAY,iBAAiB,QAASS,CAAkB,GAG1D,MAAMC,EAAkBF,EAAK,KAAK,IAAIG,GAAMrB,EAAkBqB,CAAE,CAAC,EAAE,KAAK,EAAE,EAE1Eb,EAAU,UAAYY,EAEtBE,IAEAf,EAAa,MAAK,EAEdO,EACFA,EAAS,QAAO,EAEhBA,EAAW,IAAIS,EAAe,gBAAiB,CAC7C,aAAc,MACd,aAAc,GACtB,CAAO,CAEJ,MAAe,CACdN,EAAS,MAAM,CACb,QACE,mEACF,SAAU,UAChB,CAAK,CACF,CACDL,GACF,EAEAL,EAAa,iBAAiB,SAAUQ,CAAkB,EAE1D,MAAMI,EAAqB,MAAMH,GAAS,CACxC,GAAI,CACFH,IAEA,KAAM,CAAE,KAAAK,CAAI,EAAK,MAAMhB,EAAkBC,EAAaU,CAAI,EAEpDO,EAAkBF,EAAK,KAAK,IAAIG,GAAMrB,EAAkBqB,CAAE,CAAC,EAAE,KAAK,EAAE,EAE1Eb,EAAU,mBAAmB,YAAaY,CAAe,EAEzDE,IAGAR,EAAS,QAAO,EAEZD,EAAO,IAAMK,EAAK,YACpBR,EAAY,UAAU,IAAI,WAAW,EAErCA,EAAY,oBAAoB,QAASS,CAAkB,EAE3DF,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,EAEJ,OAAQO,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH,EACMF,EAAyB,IAAM,CACnC,MAAMG,EAAa,SAChB,cAAc,eAAe,EAC7B,sBAAqB,EAAG,OAC3B,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}